<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Islamic History Portal</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&amp;family=Amiri:wght@400;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    
    :root {
      --gold: #daa520;
      --gold-dark: #cd853f;
      --bg-dark: #1a1a1a;
      --bg-card: rgba(0,0,0,0.7);
      --text-light: #e6e6e6;
      --text-gold: #d4af37;
    }

    .light-theme {
      --gold: #b8860b;
      --gold-dark: #9a7209;
      --bg-dark: #f8f9fa;
      --bg-card: rgba(255,255,255,0.9);
      --text-light: #2d3748;
      --text-gold: #b8860b;
    }

    body {
      font-family: 'Playfair Display', serif;
      background: linear-gradient(135deg, var(--bg-dark) 0%, #2d2d2d 50%, var(--bg-dark) 100%);
      color: var(--text-light);
      margin: 0;
      padding: 0;
      min-height: 100%;
    }

    .arabic-font {
      font-family: 'Amiri', serif;
    }

    /* Header */
    .header {
      background: rgba(0,0,0,0.9);
      backdrop-filter: blur(10px);
      border-bottom: 2px solid var(--gold);
      padding: 1rem 2rem;
      position: sticky;
      top: 0;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .logo {
      color: var(--gold);
      font-size: 1.5rem;
      font-weight: bold;
    }

    .nav-button {
      background: rgba(218, 165, 32, 0.2);
      border: none;
      color: var(--gold);
      width: 40px;
      height: 40px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .nav-button:hover {
      background: rgba(218, 165, 32, 0.3);
      transform: scale(1.05);
    }

    .header-controls {
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }

    .time-display {
      color: var(--gold-dark);
      font-size: 0.9rem;
      text-align: center;
      margin: 0 1rem;
    }

    /* Sidebar */
    .sidebar {
      position: fixed;
      left: -300px;
      top: 0;
      width: 300px;
      height: 100%;
      background: linear-gradient(180deg, rgba(0,0,0,0.95), rgba(26,26,26,0.95));
      backdrop-filter: blur(15px);
      border-right: 3px solid var(--gold);
      transition: left 0.3s ease;
      z-index: 2000;
      overflow-y: auto;
      padding-top: 80px;
    }

    .sidebar.open {
      left: 0;
    }

    .sidebar-header {
      padding: 2rem 1.5rem;
      text-align: center;
      border-bottom: 1px solid rgba(218, 165, 32, 0.3);
    }

    .sidebar-title {
      color: var(--gold);
      font-size: 1.5rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }

    .nav-item {
      display: block;
      padding: 1rem 1.5rem;
      color: #e0e0e0;
      text-decoration: none;
      border-left: 3px solid transparent;
      transition: all 0.3s ease;
    }

    .nav-item:hover {
      background: rgba(218, 165, 32, 0.1);
      border-left-color: var(--gold);
      color: var(--gold);
    }

    /* Settings Panel */
    .settings-panel {
      position: fixed;
      top: 80px;
      right: -350px;
      width: 320px;
      background: rgba(0,0,0,0.95);
      backdrop-filter: blur(15px);
      border-radius: 12px;
      border: 2px solid var(--gold);
      padding: 1.5rem;
      transition: right 0.3s ease;
      z-index: 2000;
      max-height: 80%;
      overflow-y: auto;
    }

    .settings-panel.open {
      right: 1rem;
    }

    .settings-header {
      color: var(--gold);
      font-size: 1.2rem;
      font-weight: bold;
      margin-bottom: 1.5rem;
      text-align: center;
    }

    .setting-group {
      margin-bottom: 1.5rem;
    }

    .setting-label {
      color: var(--gold-dark);
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
      display: block;
    }

    .setting-range {
      width: 100%;
      accent-color: var(--gold);
    }

    .setting-checkbox {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--gold-dark);
      font-size: 0.9rem;
    }

    .setting-checkbox input {
      accent-color: var(--gold);
    }

    /* Banner */
    .banner {
      height: 400px;
      background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.6)),
                  url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="islamic" patternUnits="userSpaceOnUse" width="20" height="20"><circle cx="10" cy="10" r="2" fill="%23daa520" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23islamic)"/></svg>');
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      margin: 1rem;
      border-radius: 15px;
      border: 1px solid rgba(218, 165, 32, 0.3);
      position: relative;
      overflow: hidden;
    }

    .banner-content h1 {
      color: var(--gold);
      font-size: 3.5rem;
      font-weight: bold;
      margin-bottom: 1rem;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
    }

    .banner-content p {
      color: #f1f1f1;
      font-size: 1.2rem;
      max-width: 600px;
    }

    /* Content */
    .content {
      padding: 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    .era-section {
      margin: 3rem 0;
      background: var(--bg-card);
      padding: 2rem;
      border-radius: 15px;
      border: 1px solid rgba(218, 165, 32, 0.3);
      backdrop-filter: blur(10px);
      transition: transform 0.3s ease;
    }

    .era-section:hover {
      transform: translateY(-5px);
    }

    .era-title {
      color: var(--text-gold);
      font-size: 1.8rem;
      margin-bottom: 1rem;
      font-weight: bold;
    }

    .era-text {
      line-height: 1.8;
      font-size: 1.1rem;
      color: var(--text-light);
    }

    .ornament {
      text-align: center;
      color: var(--gold-dark);
      font-size: 2rem;
      margin: 2rem 0;
    }

    .divider {
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
      margin: 3rem 0;
    }

    /* Overlay */
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      z-index: 1500;
    }

    .overlay.active {
      opacity: 1;
      visibility: visible;
    }

    /* Quote Display */
    .quote-display {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.95);
      color: var(--gold);
      padding: 1.5rem 2rem;
      border-radius: 15px;
      border: 2px solid var(--gold);
      max-width: 500px;
      text-align: center;
      z-index: 3000;
      opacity: 0;
      transition: all 0.3s ease;
    }

    .quote-display.show {
      opacity: 1;
    }

    /* Footer */
    .footer {
      background: rgba(0,0,0,0.9);
      color: var(--gold);
      text-align: center;
      padding: 2rem;
      margin-top: 4rem;
      border-top: 3px solid var(--gold);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .header {
        padding: 1rem;
      }
      
      .logo {
        font-size: 1.2rem;
      }
      
      .time-display {
        display: none;
      }
      
      .banner-content h1 {
        font-size: 2.5rem;
      }
      
      .content {
        padding: 1rem;
      }
      
      .settings-panel {
        width: calc(100% - 2rem);
        right: -100%;
      }
      
      .settings-panel.open {
        right: 1rem;
      }
    }

    /* Animations */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .era-section {
      animation: fadeInUp 0.6s ease forwards;
    }

    .era-section:nth-child(even) {
      animation-delay: 0.1s;
    }

    .era-section:nth-child(odd) {
      animation-delay: 0.2s;
    }

    /* Audio Button */
    .audio-control {
      position: fixed;
      top: 90px;
      right: 20px;
      background: var(--gold);
      color: #000;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 25px;
      font-weight: bold;
      cursor: pointer;
      z-index: 1000;
      transition: all 0.3s ease;
    }

    .audio-control:hover {
      background: var(--gold-dark);
      transform: scale(1.05);
    }

    /* Scroll to top */
    .scroll-top {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, var(--gold), var(--gold-dark));
      border: none;
      border-radius: 50%;
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 1000;
    }

    .scroll-top:hover {
      transform: scale(1.1);
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body><!-- Header -->
  <header class="header"><button class="nav-button" onclick="toggleSidebar()">☰</button>
   <div class="logo"><span id="site-title">Islamic History Portal</span>
   </div>
   <div class="time-display">
    <div id="mecca-time"></div>
    <div style="font-size: 0.8rem;">
     Mecca Time
    </div>
   </div>
   <div class="header-controls"><button class="nav-button" onclick="showQuote()" title="Islamic Quote">💭</button> <button class="nav-button" id="audioToggle" title="Toggle Audio">🔊</button> <button class="nav-button" onclick="toggleTheme()" title="Toggle Theme">🌙</button> <button class="nav-button" onclick="toggleSettings()" title="Settings">⚙️</button>
   </div>
  </header><!-- Sidebar -->
  <nav class="sidebar" id="sidebar">
   <div class="sidebar-header">
    <div class="sidebar-title">
     ☪ Navigation
    </div>
    <div style="color: var(--gold-dark); font-size: 0.9rem;">
     Peace be upon you
    </div>
   </div>
   <div><a href="#section-1" class="nav-item">Prophet Adam &amp; Dawn of Humanity</a> <a href="#section-2" class="nav-item">Prophets Noah &amp; Hud</a> <a href="#section-3" class="nav-item">Abraham: Father of Prophets</a> <a href="#section-4" class="nav-item">Joseph &amp; Virtue of Patience</a> <a href="#section-5" class="nav-item">Moses &amp; the Exodus</a> <a href="#section-6" class="nav-item">Jesus: Messiah &amp; Message</a> <a href="#section-7" class="nav-item">Early Predecessors</a> <a href="#section-8" class="nav-item">Muhammad ﷺ Receives Revelation</a> <a href="#section-9" class="nav-item">Public Call in Mecca</a> <a href="#section-10" class="nav-item">Migration to Abyssinia</a> <a href="#section-11" class="nav-item">The Hijrah to Medina</a> <a href="#section-12" class="nav-item">Medina's Growth</a> <a href="#section-13" class="nav-item">Farewell Pilgrimage</a> <a href="#section-14" class="nav-item">Caliph Abu Bakr</a> <a href="#section-15" class="nav-item">Caliph Umar</a> <a href="#section-16" class="nav-item">Caliph Uthman</a> <a href="#section-17" class="nav-item">Caliph Ali</a> <a href="#section-18" class="nav-item">Umayyads Empire</a> <a href="#section-19" class="nav-item">Abbasid Golden Age</a> <a href="#section-20" class="nav-item">Islamic Sciences</a> <a href="#section-21" class="nav-item">Crusades Response</a> <a href="#section-22" class="nav-item">Mongol Invasion</a> <a href="#section-23" class="nav-item">Ottoman Guardians</a> <a href="#section-24" class="nav-item">Safavids &amp; Shia</a> <a href="#section-25" class="nav-item">Mughal Synthesis</a> <a href="#section-26" class="nav-item">Colonial Encounter</a> <a href="#section-27" class="nav-item">Fall of Caliphate</a> <a href="#section-28" class="nav-item">Nation-States</a> <a href="#section-29" class="nav-item">Islam &amp; Globalization</a> <a href="#section-30" class="nav-item">Today's Challenges</a>
   </div>
  </nav><!-- Settings Panel -->
  <div class="settings-panel" id="settingsPanel">
   <div class="settings-header">
    ⚙️ Settings
   </div>
   <div class="setting-group"><label class="setting-label">Font Size</label> <input type="range" min="14" max="22" value="16" onchange="changeFontSize(this.value)" class="setting-range">
   </div>
   <div class="setting-group"><label class="setting-checkbox"> <input type="checkbox" onchange="toggleReadingMode(this.checked)"> <span>Reading Mode</span> </label>
   </div>
   <div class="setting-group"><label class="setting-checkbox"> <input type="checkbox" checked onchange="togglePatterns(this.checked)"> <span>Decorative Patterns</span> </label>
   </div><button onclick="toggleSettings()" style="width: 100%; background: linear-gradient(45deg, var(--gold), var(--gold-dark)); color: white; border: none; padding: 0.75rem; border-radius: 8px; font-weight: bold; cursor: pointer;"> Close </button>
  </div><!-- Overlay -->
  <div class="overlay" id="overlay" onclick="closeAll()"></div><!-- Quote Display -->
  <div class="quote-display" id="quoteDisplay"></div><!-- Audio Control --> <button class="audio-control" id="audioControl">Stop Audio</button> <!-- Audio Element -->
  <audio id="bgAudio" autoplay loop><source src="maher.mp3.mp3" type="audio/mpeg">
  </audio><!-- Banner -->
  <div class="banner">
   <div class="banner-content">
    <h1 id="banner-title">Islamic History Journey</h1>
    <p id="banner-subtitle">Explore the rich tapestry of Islamic civilization through captivating stories</p>
   </div>
  </div><!-- Main Content -->
  <main class="content">
   <div class="ornament">
    ◆ ◆ ◆
   </div>
   <div class="era-section" id="section-1">
    <h2 class="era-title">1. Prophet Adam &amp; the Dawn of Humanity</h2>
    <p class="era-text">Adam عليه السلام was the first man and prophet, placed in Paradise and commanded to guide humanity. His story sets the foundation for divine guidance and the human test.</p>
   </div>
   <div class="era-section" id="section-2">
    <h2 class="era-title">2. Prophets Noah &amp; Hud: Call to Monotheism</h2>
    <p class="era-text">Noah and Hud عليهما السلام warned their peoples against idol worship and moral decline, showing early resistance to divine truth.</p>
   </div>
   <div class="era-section" id="section-3">
    <h2 class="era-title">3. Abraham: Father of Prophets</h2>
    <p class="era-text">Ibrahim عليه السلام exemplified submission, rebuilding the Ka'bah with his son and rejecting idolatry, standing at the pivot of three monotheistic traditions.</p>
   </div>
   <div class="era-section" id="section-4">
    <h2 class="era-title">4. Joseph &amp; the Virtue of Patience</h2>
    <p class="era-text">Yusuf عليه السلام endured betrayal and hardship, rising to power in Egypt and demonstrating profound faith and forgiveness.</p>
   </div>
   <div class="era-section" id="section-5">
    <h2 class="era-title">5. Moses &amp; the Exodus</h2>
    <p class="era-text">Musa عليه السلام led Bani Israel from bondage, received divine law, and often stood alone against Pharaoh's tyranny.</p>
   </div>
   <div class="era-section" id="section-6">
    <h2 class="era-title">6. Jesus: Messiah &amp; Message</h2>
    <p class="era-text">Isa عليه السلام confirmed the Torah and brought the Injil, performing miracles and calling for repentance.</p>
   </div>
   <div class="era-section" id="section-7">
    <h2 class="era-title">7. Early Predecessors &amp; the Promise of the Final Prophet</h2>
    <p class="era-text">Other prophets like Yunus, Shu'ayb, and Salih relaunched God's teachings in various communities, each fulfilling divine will.</p>
   </div>
   <div class="divider"></div>
   <div class="era-section" id="section-8">
    <h2 class="era-title">8. Muhammad ﷺ Receives Revelation (610 CE)</h2>
    <p class="era-text">At age 40, the Prophet ﷺ was visited by Jibreel in the Cave of Hira, starting the era of Quranic revelation.</p>
   </div>
   <div class="era-section" id="section-9">
    <h2 class="era-title">9. Public Call in Mecca &amp; Boycott</h2>
    <p class="era-text">He began preaching publicly in Mecca, facing resistance, economic sanctions, and social ostracism from Quraysh leaders.</p>
   </div>
   <div class="era-section" id="section-10">
    <h2 class="era-title">10. Migration to Abyssinia</h2>
    <p class="era-text">Sleepless weeks saw early Muslims seeking refuge in Abyssinia, protected under a just Christian ruler.</p>
   </div>
   <div class="era-section" id="section-11">
    <h2 class="era-title">11. The Hijrah to Medina (622 CE)</h2>
    <p class="era-text">The Prophet ﷺ and companions migrated to Medina, establishing the first Islamic state founded on the Constitution of Medina.</p>
   </div>
   <div class="era-section" id="section-12">
    <h2 class="era-title">12. Medina's Growth: Battles &amp; Treaties</h2>
    <p class="era-text">Defensive battles (Badr, Uhud, Trench), the treaty of Hudaybiyyah, and the capturing of Mecca in 630 CE shaped Muslim unity and strength.</p>
   </div>
   <div class="era-section" id="section-13">
    <h2 class="era-title">13. Farewell Pilgrimage &amp; Passing (632 CE)</h2>
    <p class="era-text">During the final pilgrimage, the Prophet ﷺ delivered the Farewell Sermon. He passed away months later, completing divine revelation.</p>
   </div>
   <div class="era-section" id="section-14">
    <h2 class="era-title">14. Caliph Abu Bakr &amp; Compilation of the Qur'an</h2>
    <p class="era-text">Abu Bakr led during internal uprisings, and under Caliph Uthman the Qur'an was compiled into a single manuscript.</p>
   </div>
   <div class="era-section" id="section-15">
    <h2 class="era-title">15. Caliph Umar: Expansion &amp; Administration</h2>
    <p class="era-text">Under Umar, the empire expanded to Syria and Egypt, and administrative institutions like the Islamic calendar were established.</p>
   </div>
   <div class="era-section" id="section-16">
    <h2 class="era-title">16. Caliph Uthman &amp; Standardizing Qur'an</h2>
    <p class="era-text">Uthman standardized the Qur'an's written text and defended the frontier regions before his martyrdom.</p>
   </div>
   <div class="era-section" id="section-17">
    <h2 class="era-title">17. Caliph Ali &amp; the First Civil War</h2>
    <p class="era-text">Ali's tenure set precedents for future Islamic jurisprudence and governance.</p>
   </div>
   <div class="era-section" id="section-18">
    <h2 class="era-title">18. Umayyads: Empire Building</h2>
    <p class="era-text">The Umayyad dynasty established a centralized authority, expanded to Spain (Andalusia), and built the Dome of the Rock.</p>
   </div>
   <div class="era-section" id="section-19">
    <h2 class="era-title">19. Abbasid Revolution &amp; Golden Age</h2>
    <p class="era-text">The Abbasids shifted the capital to Baghdad, creating the Bayt al-Hikma (House of Wisdom) and fostering scholars such as Al-Khwarizmi, Al-Ghazali.</p>
   </div>
   <div class="era-section" id="section-20">
    <h2 class="era-title">20. Islamic Sciences: Era of Discovery</h2>
    <p class="era-text">Fields like algebra, medicine, optics, and mapmaking flourished under scholars like Avicenna, Al-Razi, Al-Biruni, and Ibn Rushd.</p>
   </div>
   <div class="era-section" id="section-21">
    <h2 class="era-title">21. Crusades &amp; Islamic Response</h2>
    <p class="era-text">From 1096 onward, Muslim dynasties defended their lands in regions like Egypt, Syria, and Palestine, with leaders such as Salahuddin Ayyubi.</p>
   </div>
   <div class="era-section" id="section-22">
    <h2 class="era-title">22. Mongol Invasion &amp; Istanbul's Rise</h2>
    <p class="era-text">The Mongols sacked Baghdad in 1258, but Mamluks preserved Islamic civilization, and Ottomans established Istanbul as a global center.</p>
   </div>
   <div class="era-section" id="section-23">
    <h2 class="era-title">23. Ottomans as Guardians (1453–1924)</h2>
    <p class="era-text">The Ottoman Empire united diverse Muslim lands, contributing to architecture (Blue Mosque), law, and maritime trade.</p>
   </div>
   <div class="era-section" id="section-24">
    <h2 class="era-title">24. Safavids &amp; Shia Institutionalization</h2>
    <p class="era-text">In Iran, the Safavid state made Twelver Shi'ism the official faith, fostering Persian art, poetry, and religious scholarship.</p>
   </div>
   <div class="era-section" id="section-25">
    <h2 class="era-title">25. Mughals: Indo-Islamic Synthesis</h2>
    <p class="era-text">Mughal rulers like Akbar and Shah Jahan blended Persian, Indian traditions, constructing monuments like the Taj Mahal and a cosmopolitan culture.</p>
   </div>
   <div class="era-section" id="section-26">
    <h2 class="era-title">26. Colonial Encounter &amp; Reform Movements</h2>
    <p class="era-text">Colonial rule brought resistance and reform. Figures like Muhammad Abduh, Jamal al-Din al-Afghani, Shah Waliullah sought to revive Islamic thought and governance.</p>
   </div>
   <div class="era-section" id="section-27">
    <h2 class="era-title">27. Fall of the Ottoman Caliphate (1924)</h2>
    <p class="era-text">Mustafa Kemal abolished the Caliphate, prompting global Muslim soul-searching and new modern Islamic identities.</p>
   </div>
   <div class="era-section" id="section-28">
    <h2 class="era-title">28. Emergence of Nation-States</h2>
    <p class="era-text">Independent countries like Egypt, Pakistan, Malaysia, Indonesia emerged, negotiating modernity and Islam through constitutions and institutions.</p>
   </div>
   <div class="era-section" id="section-29">
    <h2 class="era-title">29. Islam &amp; Globalization (Late 20th–21st c.)</h2>
    <p class="era-text">Global Muslim identity grew through media, migration, and education. Interfaith dialogue, economic development, and Islamic finance became prominent.</p>
   </div>
   <div class="era-section" id="section-30">
    <h2 class="era-title">30. Today's Challenges &amp; Opportunities</h2>
    <p class="era-text">Contemporary Muslims navigate geopolitics, minority rights, digital outreach, and renewal movements—showing Islam's resilience and adaptability.</p>
   </div>
   <div class="ornament">
    ◆ ◆ ◆
   </div>
  </main><!-- Scroll to Top Button --> <button class="scroll-top" onclick="scrollToTop()">↑</button> <!-- Footer -->
  <footer class="footer">
   <div class="ornament">
    ◆ ◆ ◆
   </div>
   <p>© 2024 Islamic History Portal - All Rights Reserved</p>
   <p style="margin-top: 0.5rem;">A Journey Through Rich Islamic History</p>
   <p style="margin-top: 0.5rem; font-size: 0.9rem; opacity: 0.8;">May Allah bless our journey through history</p>
  </footer>
  <script>
    // Default configuration
    const defaultConfig = {
      site_title: "Islamic History Portal",
      banner_title: "Islamic History Journey",
      banner_subtitle: "Explore the rich tapestry of Islamic civilization through captivating stories"
    };

    // Initialize Element SDK
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig: defaultConfig,
        onConfigChange: async (config) => {
          const titleElement = document.getElementById('site-title');
          if (titleElement) {
            titleElement.textContent = config.site_title || defaultConfig.site_title;
          }

          const bannerTitleElement = document.getElementById('banner-title');
          if (bannerTitleElement) {
            bannerTitleElement.textContent = config.banner_title || defaultConfig.banner_title;
          }

          const bannerSubtitleElement = document.getElementById('banner-subtitle');
          if (bannerSubtitleElement) {
            bannerSubtitleElement.textContent = config.banner_subtitle || defaultConfig.banner_subtitle;
          }
        },
        mapToCapabilities: (config) => ({
          recolorables: [],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (config) => new Map([
          ["site_title", config.site_title || defaultConfig.site_title],
          ["banner_title", config.banner_title || defaultConfig.banner_title],
          ["banner_subtitle", config.banner_subtitle || defaultConfig.banner_subtitle]
        ])
      });
    }

    // State management
    let isAudioPlaying = true;
    let isDarkTheme = true;

    // Islamic quotes
    const islamicQuotes = [
      "And whoever relies upon Allah - then He is sufficient for him. Indeed, Allah will accomplish His purpose. - Quran 65:3",
      "So remember Me; I will remember you. And be grateful to Me and do not deny Me. - Quran 2:152",
      "And Allah is the best of planners. - Quran 8:30",
      "Indeed, with hardship comes ease. - Quran 94:6",
      "The believer is not one who eats his fill while his neighbor goes hungry. - Prophet Muhammad ﷺ",
      "The best of people are those who benefit others. - Prophet Muhammad ﷺ",
      "Kindness is a mark of faith, and whoever is not kind has no faith. - Prophet Muhammad ﷺ",
      "Seek knowledge from the cradle to the grave. - Prophet Muhammad ﷺ"
    ];

    // Functions
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('overlay');
      
      sidebar.classList.toggle('open');
      
      if (sidebar.classList.contains('open')) {
        overlay.classList.add('active');
      } else {
        overlay.classList.remove('active');
      }
    }

    function toggleSettings() {
      const panel = document.getElementById('settingsPanel');
      const overlay = document.getElementById('overlay');
      
      panel.classList.toggle('open');
      
      if (panel.classList.contains('open')) {
        overlay.classList.add('active');
      } else {
        overlay.classList.remove('active');
      }
    }

    function closeAll() {
      document.getElementById('sidebar').classList.remove('open');
      document.getElementById('settingsPanel').classList.remove('open');
      document.getElementById('overlay').classList.remove('active');
    }

    function toggleTheme() {
      isDarkTheme = !isDarkTheme;
      const body = document.body;
      const themeButton = document.querySelector('button[onclick="toggleTheme()"]');
      
      if (isDarkTheme) {
        body.classList.remove('light-theme');
        themeButton.textContent = '🌙';
      } else {
        body.classList.add('light-theme');
        themeButton.textContent = '☀️';
      }
    }

    function toggleAudio() {
      const audio = document.getElementById('bgAudio');
      const audioButton = document.getElementById('audioToggle');
      const audioControl = document.getElementById('audioControl');
      
      if (isAudioPlaying) {
        audio.pause();
        audioButton.textContent = '🔇';
        audioControl.textContent = 'Play Audio';
        isAudioPlaying = false;
      } else {
        audio.play();
        audioButton.textContent = '🔊';
        audioControl.textContent = 'Stop Audio';
        isAudioPlaying = true;
      }
    }

    function showQuote() {
      const quote = islamicQuotes[Math.floor(Math.random() * islamicQuotes.length)];
      const quoteDisplay = document.getElementById('quoteDisplay');
      
      quoteDisplay.innerHTML = `<div style="margin-bottom: 0.5rem;">💭</div>${quote}`;
      quoteDisplay.classList.add('show');
      
      setTimeout(() => {
        quoteDisplay.classList.remove('show');
      }, 4000);
    }

    function changeFontSize(size) {
      document.documentElement.style.fontSize = size + 'px';
    }

    function toggleReadingMode(enabled) {
      const body = document.body;
      if (enabled) {
        body.style.background = '#1a1a1a';
        document.querySelectorAll('.era-text').forEach(el => {
          el.style.fontSize = '1.2rem';
          el.style.lineHeight = '2';
        });
      } else {
        body.style.background = '';
        document.querySelectorAll('.era-text').forEach(el => {
          el.style.fontSize = '';
          el.style.lineHeight = '';
        });
      }
    }

    function togglePatterns(enabled) {
      const banner = document.querySelector('.banner');
      if (enabled) {
        banner.style.backgroundImage = '';
      } else {
        banner.style.backgroundImage = 'linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.6))';
      }
    }

    function updateMeccaTime() {
      const now = new Date();
      const meccaTime = new Date(now.toLocaleString("en-US", {timeZone: "Asia/Riyadh"}));
      const timeString = meccaTime.toLocaleTimeString('en-US', {
        hour12: true,
        hour: '2-digit',
        minute: '2-digit'
      });
      
      const timeElement = document.getElementById('mecca-time');
      if (timeElement) {
        timeElement.textContent = timeString;
      }
    }

    function scrollToTop() {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    }

    // Event listeners
    document.getElementById('audioToggle').addEventListener('click', toggleAudio);
    document.getElementById('audioControl').addEventListener('click', toggleAudio);

    // Navigation items
    document.querySelectorAll('.nav-item').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        closeAll();
        
        // Get the target section ID from href
        const targetId = link.getAttribute('href');
        const targetSection = document.querySelector(targetId);
        
        if (targetSection) {
          // Smooth scroll to the section
          targetSection.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
          
          // Highlight the section briefly
          targetSection.style.transform = 'scale(1.02)';
          targetSection.style.boxShadow = '0 0 20px rgba(218, 165, 32, 0.5)';
          
          setTimeout(() => {
            targetSection.style.transform = '';
            targetSection.style.boxShadow = '';
          }, 1000);
        }
      });
    });

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      updateMeccaTime();
      setInterval(updateMeccaTime, 60000); // Update every minute
      
      // Close panels when clicking outside
      document.addEventListener('click', function(event) {
        const sidebar = document.getElementById('sidebar');
        const settingsPanel = document.getElementById('settingsPanel');
        const overlay = document.getElementById('overlay');
        
        if (!sidebar.contains(event.target) && 
            !settingsPanel.contains(event.target) && 
            !event.target.closest('button[onclick="toggleSidebar()"]') &&
            !event.target.closest('button[onclick="toggleSettings()"]')) {
          closeAll();
        }
      });
    });
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99536fb110e8ce6f',t:'MTc2MTU4MTE0MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
